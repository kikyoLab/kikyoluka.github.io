<!DOCTYPE html><html lang="ZH-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="referrer" content="no-referrer"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no,viewport-fit=cover"><meta name="author" content="琉花"><meta name="copyright" content="琉花"><meta name="og:image" content="/images/avatar.jpg"><meta name="og:type" content="website"><meta name="og:site_name" content="琉花"><meta name="og:url" content="kikyoluka.cn"><meta name="og：title" content="琉花"><meta name="theme-color" content="#b854d4" /><title>琉花</title><link rel="shortcut icon" href="/images/favicon.jpg" type="image/x-icon"><link rel="stylesheet" href="/css/index.css?version=2.0.0"><link rel="stylesheet" href="/font/fontello.css?version=2.0.0"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Fira+Mono|Noto+Serif+SC&amp;amp;display=swap"><link rel="canonical" href="//kikyoluka.cn"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="stylesheet" href="/lib/gitalk/gitalk.min.css"><script src="/lib/gitalk/gitalk.min.js"></script><meta name="generator" content="Hexo 4.2.0"></head><body><div class="layout"><header><div class="header"><div class="mobile-bg" style="background-image:url(/images/mobile.png);"></div><h1 class="title">琉花</h1><h2 class="subtitle">行至朝雾里 坠入暮云间</h2><nav class="menu"><a class="menu-item pjax-main-link" href="/"><li><i class="icon-index"></i><span>首页</span></li></a><a class="menu-item pjax-main-link" href="/archives/"><li><i class="icon-archives"></i><span>归档</span></li></a><a class="menu-item pjax-main-link" href="/categories/"><li><i class="icon-categories"></i><span>分类</span></li></a><a class="menu-item pjax-main-link" href="/tags/"><li><i class="icon-tags"></i><span>标签</span></li></a><a class="menu-item pjax-main-link" href="/books/"><li><i class="icon-books"></i><span>书单</span></li></a><a class="menu-item pjax-main-link" href="/inspirations/"><li><i class="icon-inspiration"></i><span>灵感</span></li></a><a class="menu-item pjax-main-link" href="/friends/"><li><i class="icon-friends"></i><span>友链</span></li></a><a class="menu-item pjax-main-link" href="/about/"><li><i class="icon-about"></i><span>关于</span></li></a></nav></div></header><main><div class="main-wrapper"></div><div class="pjax-main-page"><div class="post"><article class="post-article"><div class="post-header"><img class="default-image" src="/images/postDefaultImage%20.png" style="opacity:0;"/><img class="post-image" src="https://raw.githubusercontent.com/chanshiyucx/yoi/master/bg/1.jpg"/><div class="post-head"><div class="post-title-wrapper"><h1 class="post-title">关于vue-cli@3.0 npm run build报错</h1><span class="post-image-source">pixiv</span></div><div class="post-meta"><span class="post-date"><i class="icon-calendar"></i><span class="date timeago" datetime="2019-12-06T02:10:10.000Z"></span></span><span class="post-hot"><i class="icon-fire"></i><span class="leancloud_visitors" id="/2019/12/06/article/" data-flag-title="关于vue-cli@3.0 npm run build报错">热度<span class="leancloud-visitors-count">0</span>℃</span></span><span class="post-tags"><i class="icon-tag"></i><span class="tag">自言自语</span></span><span class="post-categories"><i class="icon-bookmark-empty"></i><span class="category">说说</span></span></div></div></div><div class="post-content"><div class="markdown"><p>昨天完成了Hitokoto项目运行vue-cli-server serve准备打包的时候发现系统出现了报错：</p>
<pre><code class="bash">&gt;Error No module factory available for dependency type: CssDependency</code></pre>
<p>根据报错意思来看的话大概是没有模块可以用于这个CssDependency依赖项，然后上stackoverflow查了查都是关于angular的相关问题，没有关于vue-cli的，于是就在Github向vue-cli作者拉取了问题请求，emmmmm问题并没有得到解决，但是。。。我又npm run build了一次，这次直接没有问题就成功的生成了dist文件.(ps：果然还是要靠玄学)</p>
<p>下一步就是将vue-cli项目部署到github pages了</p>
<h2 id="关于vue-cli项目部署到github实现预览"><a href="#关于vue-cli项目部署到github实现预览" class="headerlink" title="关于vue-cli项目部署到github实现预览"></a>关于vue-cli项目部署到github实现预览</h2><p>我使用的vue-router是hash模式，所以项目路径就包含了#，虽然外观上不是很好看，但是目前就凑合了</p>
<h3 id="配置publicPath"><a href="#配置publicPath" class="headerlink" title="配置publicPath"></a>配置publicPath</h3><p>在vue项目根目录下打开vue.config.js文件，然后在module.exports下面添加publicPath: “./“</p>
<pre><code class="bash">  module.exports = {
    publicPath: &quot;./&quot;
    }</code></pre>
<p>然后在github创建一个新的库，库名为”你的用户名.github.io”</p>
<p>将本地项目push到远程master （非必须）以下user为你的用户名 username为仓库名</p>
<pre><code class="bash">  &gt;echo &quot;# user&quot; &gt;&gt; README.md
  &gt;git init
  &gt;git add README.md
  &gt;git commit -m &quot;first commit&quot;
  &gt;git remote add origin https://github.com/user/username.git
  &gt;git push -u origin master</code></pre>
<h3 id="下面这一步最重要，将打包后的dist文件夹push到gh-pages"><a href="#下面这一步最重要，将打包后的dist文件夹push到gh-pages" class="headerlink" title="下面这一步最重要，将打包后的dist文件夹push到gh-pages"></a>下面这一步最重要，将打包后的dist文件夹push到gh-pages</h3><pre><code class="bash">  &gt;npm run build
  &gt;git checkout -b gh-pages
  &gt;git add -f dist
  &gt;git commit -m &#39;first commit&#39;
  &gt;git subtree push --prefix dist origin gh-pages</code></pre>
<p>一般来讲在github进行预览是没问题了，如果出现打开index.html是空白的话，那就打开你刚才新建的”用户名.github.io”的库，手动将dist文件里的内容上传到该库，然后进入项目所在库（注：项目库和dist文件所在库不是一个库），最后再打开setting，翻到github pages然后点击已经好了的链接就可以预览了.</p>
</div></div></article></div><div id="gitalk"></div><script>var gitalk = new Gitalk({
    clientID: '1f696e7024ff02f8eeea',
    clientSecret: '111850abd75bf6cd789840d4e3af10d298fa72e6',
    id: '2019-12-06 10:10:10',
    repo: 'comments',
    owner: 'kikyoluka',
    admin: 'kikyoluka'
})
gitalk.render('gitalk')</script></div><div class="pjax-main-loading loading"><img class="loading-image" src="/images/loading.gif"></div></main><footer><div class="footer site-info"><p><i class="icon-copyright"></i><span>2018</span>&minus;<span>2020</span>&nbsp;&nbsp;&nbsp;<i class="icon-heart"></i>&nbsp;&nbsp;<span>琉花</span></p><p><a href="https://github.com/sanshiliuxiao/hexo-theme-aurora.git" target="_blank">hexo-theme-Aurora</a>&nbsp; | &nbsp;行至朝雾里 坠入暮云间</p></div></footer></div><div class="bg"><div class="pc-dynamic-bg"><span class="image" data-image="/images/theme/1.jpg"></span><span class="image" data-image="/images/theme/2.jpg"></span><span class="image" data-image="/images/theme/3.jpg"></span><span class="image" data-image="/images/theme/4.jpg"></span><span class="image" data-image="/images/theme/5.jpg"></span><span class="image" data-image="/images/theme/6.jpg"></span><span class="image" data-image="/images/theme/7.jpg"></span><span class="image" data-image="/images/theme/8.jpg"></span><span class="image" data-image="/images/theme/9.jpg"></span></div></div><span class="back-to-top"></span><div class="leancloud"><script src="/js/third-party/leancloud.min.js?version=2.0.0"></script><div class="leancloud-app-id" leancloud-app-id="LjOwR4ELEqbauKvtQbwq5TUw-MdYXbMMI"></div><div class="leancloud-app-key" leancloud-app-key="BOSFJ49ohbGctgn4zvJE9VN6"></div><div class="leancloud-app-hot"></div><div class="leancloud-app-visitor"></div></div><link rel="stylesheet" href="/lib/APlayer/APlayer.min.css"><script src="/lib/APlayer/APlayer.min.js"></script><div id="aplayer"></div><script>let list = JSON.parse('[{"name":"Julia，Train，Slow Down","artist":"Whale Fall","url":"https://cdn.jsdelivr.net/gh/kikyoluka/cdn@2.1/blog/music/JuliaTrainSlowDown.mp3","cover":"https://cdn.jsdelivr.net/gh/kikyoluka/cdn@2.1/blog/cover/5.jpg"},{"name":"The Wellwisher","artist":"Halves","url":"https://cdn.jsdelivr.net/gh/kikyoluka/cdn@2.1/blog/music/TheWellwisher.mp3","cover":"https://cdn.jsdelivr.net/gh/kikyoluka/cdn@2.1/blog/cover/4.jpg"},{"name":"SadSexy","artist":"Dirty Three","url":"https://cdn.jsdelivr.net/gh/kikyoluka/cdn@2.0/blog/music/SadSexy .mp3","cover":"https://cdn.jsdelivr.net/gh/kikyoluka/cdn@2.0/blog/cover/1.jpg"},{"name":"Riverrun","artist":"Stubborn","url":"https://cdn.jsdelivr.net/gh/kikyoluka/cdn@2.1/blog/music/Riverrun.mp3","cover":"https://cdn.jsdelivr.net/gh/kikyoluka/cdn@2.1/blog/cover/3.jpg"},{"name":"Hortur","artist":"Picastro","url":"https://cdn.jsdelivr.net/gh/kikyoluka/cdn@2.0/blog/music/Hortur.mp3","cover":"https://cdn.jsdelivr.net/gh/kikyoluka/cdn@2.0/blog/cover/2.jpg"}]')
  const ap = new APlayer({
      container: document.getElementById('aplayer'),
      theme: '#b28fce',
      audio: list,
      fixed: true,
      volume: 1
  });
  ap.list.show()
</script><script src="/js/third-party/jquery.min.js?version=2.0.0"></script><script src="/js/third-party/isMobile.min.js?version=2.0.0"></script><script src="/js/third-party/timeago.min.js?version=2.0.0"></script><script src="/js/third-party/pjax.min.js?version=2.0.0"></script><script src="/js/third-party/zooming.min.js?version=2.0.0"></script><script src="/js/third-party/backstretch.min.js?version=2.0.0"></script><script src="/js/highlight.min.js?version=2.0.0"></script><script src="/js/index.js?version=2.0.0"></script></body></html>